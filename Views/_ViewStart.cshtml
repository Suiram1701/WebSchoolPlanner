@{
    ViewBag.Culture = Thread.CurrentThread.CurrentCulture;
    ViewBag.UICulture = Thread.CurrentThread.CurrentUICulture;

    // color theme
    if (User.Identity?.IsAuthenticated ?? false)
    {
        IList<Claim> userClaims = (IList<Claim>)Context.Items["userClaims"]!;
        string? themeClaim = userClaims.FirstOrDefault(c => c.Type == ConfigClaimPrefix + "theme")?.Value;
        if (string.IsNullOrEmpty(themeClaim))
            ViewBag.Theme = Theme.Auto;
        else
            ViewBag.Theme = Enum.Parse<Theme>(themeClaim);
    }
    else
    {
        string? themeCookieValue = Context.Request.Cookies[".AspNetCore.Theme"];
        switch (themeCookieValue)
        {
            case "white":
                ViewBag.Theme = Theme.White;
                break;
            case "dark":
                ViewBag.Theme = Theme.Dark;
                break;
            default:
                ViewBag.Theme = Theme.Auto;
                break;
        }
    }

    Layout = "_Layout";
}